> ğŸ”¥ **Hiï¼Œæˆ‘æ˜¯å°ä½™ã€‚**
>
> **æœ¬æ–‡å·²æ”¶å½•åˆ° [GitHub Â· Androider-Planet](https://github.com/ByteYuhb/Androider-Planet) ä¸­ã€‚è¿™é‡Œæœ‰ Android è¿›é˜¶æˆé•¿çŸ¥è¯†ä½“ç³»ï¼Œå…³æ³¨å…¬ä¼—å· [[å°ä½™çš„è‡ªä¹ å®¤](https://mp.weixin.qq.com/s?__biz=MzkwODI1NDEwMA==&mid=2247483986&idx=1&sn=57136c9c062caa1026edf9ed35915c2b&chksm=c0cd8ca9f7ba05bfcfadad10bd97006bbb57afdd048c9c46fe57d122af834f569aa9d8df0e48&token=2142008574&lang=zh_CN#rd)] ï¼Œåœ¨æˆåŠŸçš„è·¯ä¸Šä¸è¿·è·¯ï¼**
## å‰è¨€
ç»„ä»¶åŒ–ï¼Œæˆ‘ä»¬éƒ½æœ‰ä¸€äº›äº†è§£ï¼ŒåŸºæœ¬ä¸Šå¯¹äºä¸€äº›å¤§å‹äº’è”ç½‘Appæ¥è¯´ï¼Œéƒ½ä¼šé‡‡ç”¨ç»„ä»¶åŒ–æ¥å¼€å‘ï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­çš„é‡ä¸­ä¹‹é‡ï¼Œæœ¬ä¸“æ ä¼šé€šè¿‡å°†ä¸€ä¸ªå®æˆ˜é¡¹ç›®æ‰©å±•å¼€å‘è®²è§£æ•´ä¸ªé¡¹ç›®çŸ¥è¯†ä½“ç³»ã€‚

ä¸‹é¢è¿™å¹…å›¾å°±æ˜¯æˆ‘ä»¬åé¢éœ€è¦è®²è§£çš„å®æˆ˜é¡¹ç›®æ¡†æ¶ï¼š

![image-20230220105258770](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105258770.png)

ä»Šå¤©æˆ‘ä»¬å…ˆä¸è®²è§£é¡¹ç›®æ¡†æ¶ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ›å»ºä¸€ä¸ªmavenç§æœï¼Œæ¥ä¸ºæˆ‘ä»¬çš„ç»„ä»¶åŒ–æ¡†æ¶é¡¹ç›®å…ˆé“ºä¸€æ¡è·¯å­ã€‚

## ç®€ä»‹

`maven`ç§æœå…¶å®å°±æ˜¯åœ¨éƒ¨é—¨Â·å±€åŸŸç½‘Â·ä¸­è®¾ç½®ä¸€ä¸ª`maven`ä»“åº“ï¼Œæ‰€æœ‰åœ¨å±€åŸŸç½‘ä¸­çš„å¼€å‘äººå‘˜éƒ½å¯ä»¥ä½¿ç”¨è¯¥ä»“åº“ï¼š


![image-20230220105307991](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105307991.png)

PS:ç§æœä¸­å¯ä»¥æ·»åŠ è‡ªå·±æœ¬åœ°çš„ä»“åº“ï¼Œä¹Ÿå¯ä»¥ä»£ç†`ä¸­å¤®ä»“åº“`ä¸­çš„åŒ…ã€‚æ¯•ç«Ÿå¯¹äºä¸€äº›ç½‘ç»œæ¯”è¾ƒå·®çš„ç¯å¢ƒï¼Œå»ä¸­å¤®ä»“åº“é‡Œé¢è·å–æ•°æ®æ˜¯ä¸€ä¸ªå¾ˆè€—æ—¶çš„æ“ä½œ

## ä¼˜ç‚¹

**1.èŠ‚çœè‡ªå·±çš„å¤–éƒ¨å¸¦å®½ï¼š**

**2.åŠ é€Ÿæ„å»ºè¿‡ç¨‹**

**3.å¯ä»¥éƒ¨ç½²ç¬¬ä¸‰æ–¹æ„ä»¶**

**4.æé«˜ç¨³å®šæ€§ï¼Œå¢å¼ºæ§åˆ¶**

**5.é™ä½ä¸­å¤®ä»“åº“çš„è´Ÿè·**


![image-20230220105313923](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105313923.png)

### å¦‚ä½•æ­å»ºMavenç§æœ

#### 1.å»`å®˜ç½‘ä¸‹è½½` mavenç§æœå¯åŠ¨å™¨   `nexus`:

åœ°å€ï¼š[https://www.sonatype.com/]()

#### 2.ä¸‹è½½åï¼Œé…ç½®`ç¯å¢ƒå˜é‡`åï¼š

åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š`nexus /run`

#### 3.nexuså¯åŠ¨æˆåŠŸåï¼šåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š

```
http://localhost:8081/
```

-   å¯åŠ¨ç•Œé¢å¦‚ä¸‹ï¼š


![image-20230220105318221](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105318221.png)

ç‚¹å‡»å³ä¸Šè§’çš„`sign in`æŒ‰é’®ï¼š

è¾“å…¥`ç”¨æˆ·åå’Œå¯†ç `ï¼š

> ç”¨æˆ·åå’Œå¯†ç ç³»ç»Ÿä¼šæç¤ºåœ¨å“ªä¸ªç›®å½•ä¸‹

#### 4.ç™»å½•æˆåŠŸåï¼š

-   ç‚¹å‡»å¯¼èˆªæ çš„è®¾ç½®æŒ‰é’®-->repositoryè¿›å…¥ä»“åº“åˆ—è¡¨

![image-20230220105323520](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105323520.png)


![image-20230220105329919](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105329919.png)


-   ç‚¹å‡»`create Repository`åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°å±€åŸŸç½‘ä»“åº“ï¼š

å› ä¸ºæˆ‘ä»¬æ˜¯ä¸ºAndroidé¡¹ç›®åˆ›å»ºçš„mavenä»“åº“é€‰æ‹©maven2ï¼š


![image-20230220105334220](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105334220.png)

è¿™é‡Œæœ‰ä¸‰ä¸ªmaven2ç±»å‹ä»“åº“ï¼š

`*hosted*`:æœ¬åœ°å±€åŸŸç½‘ç§æœï¼Œåƒå®˜æ–¹ä»“åº“ä¸€æ ·ï¼Œæä¾›æœ¬åœ°ç§åº“åŠŸèƒ½

`*proxy*`ï¼šæä¾›ä»£ç†å…¶ä»–ä»“åº“çš„åŠŸèƒ½ï¼Œè¡¨ç¤ºè¿™ä¸ªrepositoryå¯ä»¥ä»£ç†è¿œç¨‹ä»“åº“ï¼Œæ¯”å¦‚`jcenter` `google` ç­‰è¿œç¨‹ä¸­å¤®ä»“åº“

`*group*`ï¼šç»„åˆå¤šä¸ªä»“åº“ä¸ºä¸€ä¸ªåœ°å€ä½¿ç”¨

> è¿™é‡Œæˆ‘ä»¬é€‰æ‹©`hosted`ä»“åº“å³å¯ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚é€‰å–


![image-20230220105337968](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105337968.png)

**1.è¾“å…¥ä»“åº“åç§°**

**2.è®¾ç½®mavenç±»å‹ï¼š**

`*release*`:è¡¨ç¤ºæ˜¯ä¸€ä¸ªè¯¥ä»“åº“å­˜å‚¨çš„æ˜¯ä¸€ä¸ªreleaseç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹åº“

`*snapshot*`ï¼šè¡¨ç¤ºå­˜å‚¨çš„æ˜¯ä¸€ä¸ªä¸ç¨³å®šç¬¬ä¸‰æ–¹åº“ï¼Œéœ€è¦è¿›ç¨‹å»ç§æœæˆ–è€…ä¸­å¤®ä»“åº“æ‹‰æ•°æ®ï¼š

```
<repositorys>
    <repository>
        <id>****</id>
        <url>***</url>
        <snapshots>
            <enabled>true</enabled>
            <updatePolicy>(always/ daliy/  interval/ never)</updatePolicy>
        </snapshot>
    </repository>
</repository>
```

`updatePolicy`:è¡¨ç¤ºæ›´æ–°çš„é¢‘ç‡ï¼š

        `always`ï¼šæ¯æ¬¡éƒ½éœ€è¦æ‹‰å» `    daliy`ï¼šè¡¨ç¤ºæ¯å¤©éœ€è¦æ‹‰å– `    interval`ï¼šæŒ‰åˆ†é’Ÿæ‹‰å– `    nerver`ï¼šå’Œreleaseç‰ˆæœ¬ä¸€æ ·ï¼Œä¸éœ€è¦é‡å¤æ‹‰å–

ç‚¹å‡»ç¡®å®šåå°±åˆ›å»ºçš„ä¸€ä¸ªmavenç§æœï¼š

ç‚¹å‡»è¯¥ä»“åº“å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„urlï¼Œè¿™ä¸ªurlå°±æ˜¯æˆ‘ä»¬ç§æœçš„åœ°å€ã€‚éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•ç”¨ï¼š


![image-20230220105342647](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105342647.png)

ç»è¿‡ä¸Šé¢çš„æ­¥éª¤åï¼Œæˆ‘ä»¬å°±æ­å»ºå¥½äº†ä¸€ä¸ª`maven`ç§æœï¼Œ`å±€åŸŸç½‘å†…`ç”¨æˆ·éƒ½å¯ä»¥æ‹‰å–ä½¿ç”¨

### å®æˆ˜ä¸­mavenç§æœæ¥å…¥ï¼š

##### 1.ç¬¬ä¸‰æ–¹libåº“çš„ä¸Šä¼ æ“ä½œ

ä½¿ç”¨asåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œåœ¨æ–°å»ºé¡¹ç›®ä¸‹åˆ›å»ºä¸€ä¸ªlibåº“ï¼Œå‘½åä¸º:lib_vedio:å¹¶åœ¨`lib_vedio`çš„`build.gradle`å·¥ç¨‹æ–‡ä»¶ä¸‹é¢ï¼Œå¼•å…¥`maven`åº“:

å®ç°`uploadArchives`çš„taskæ–¹æ³•ï¼š**è¿™ä¸ªæ–¹æ³•ç”¨äºä¸Šä¼ libåº“ï¼š**

```
plugins {
    id 'com.android.library'
    id 'maven'
}

//ä¸Šä¼ çš„ç±»åº“åç§°
def _artifactId = this.getName() 
//ç±»åº“ç‰ˆæœ¬
def pomVersionName = '1.0.1'
def pomName = this.getName()
//ç±»åº“æè¿°
def pomDescription = 'the vedio library for all project'

uploadArchives {
    repositories {
        mavenDeployer {
            repository(url:NEXUS_REPOSITORY_URL) {
                authentication(userName: NEXUS_USERNAME, password: NEXUS_PASSWORD)
            }
            pom.project {
                name pomName
                version pomVersionName
                description pomDescription
                artifactId _artifactId
                groupId POM_GROUPID
                packaging POM_PACKAGING
            }
        }
    }
}
```

é‡Œé¢ä¸€äº›å˜é‡æ˜¯åœ¨gradle.propertiesä¸­è®¾ç½®çš„å…¨å±€å˜é‡ï¼š

```
NEXUS_REPOSITORY_URL=http://localhost:8081/repository/anna_release/
POM_GROUPID=com.anna.android
POM_PACKAGING=aar
NEXUS_USERNAME=admin
NEXUS_PASSWORD=admin123456
```

è®¾ç½®å¥½åï¼Œæ‰§è¡Œ`uploadArchives`ä»»åŠ¡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æœ¬åœ°çš„`lib_vedio`åº“å°±ä¼šä¸Šä¼ åˆ°æˆ‘ä»¬ä¹‹å‰æ­å»ºçš„`maven`ç§æœä¸Šï¼š


![image-20230220105348258](https://picgo-test-yuhb.oss-cn-shanghai.aliyuncs.com/imgs/image-20230220105348258.png)

è¿™é‡Œå› ä¸ºæˆ‘ä»¬ä¸Šä¼ äº†ä¸¤ä¸ªç‰ˆæœ¬`1.0.0å’Œ1.0.1`

**åˆ‡è®°ï¼š**

> å¦‚æœå½“å‰ä»“åº“é€‰æ‹©çš„æ˜¯releaseå±æ€§ï¼šåˆ™æ¯æ¬¡ä¸Šä¼ çš„ç‰ˆæœ¬ä¸èƒ½ä¸€è‡´ï¼Œéœ€è¦åœ¨åŸç‰ˆæœ¬åŸºç¡€ä¸Šå¢åŠ 
>
> å¦‚æœé€‰æ‹©çš„æ˜¯snapshotå±æ€§:åˆ™å¯ä»¥åœ¨ä¸å¢åŠ ç‰ˆæœ¬å·çš„å‰æä¸‹ï¼Œä¿®æ”¹åŒä¸€ç‰ˆæœ¬çš„ä»£ç å¹¶ä¸Šä¼ ã€‚

##### mavenç§æœä»“åº“çš„æ¥å…¥ï¼š

æˆ‘ä»¬åœ¨é¡¹ç›®çš„`build.gradle`æ–‡ä»¶ä¸­å¼•å…¥mavenåº“ï¼š

```
buildscript {
    repositories {
        google()
        jcenter()
        maven {
            url = 'http://localhost:8081/repository/anna_release/'
            credentials {
                username = 'admin'
                password = 'admin123456'
            }
        }

    }
    dependencies {
        classpath "com.android.tools.build:gradle:4.1.1"

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        google()
        jcenter()
        maven {
            url = 'http://localhost:8081/repository/anna_release/'
            credentials {
                username = 'admin'
                password = 'admin123456'
            }
        }
    }
}
```

å¹¶åœ¨appæ¨¡å—å¼•å…¥libåº“æ–‡ä»¶ï¼š

```
implementation 'com.anna.android:lib_video:1.0.1'
```

è¿™æ ·å°±å¯ä»¥åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­æ„‰å¿«ä½¿ç”¨ç±»åº“å•¦ã€‚

## æ€»ç»“
å…³äºmavenä»“åº“å°±è®²åˆ°è¿™é‡Œäº†ï¼Œåç»­ä¼šæ¨å‡ºå…³äºç»„ä»¶åŒ–å¼€å‘å„ä¸ªç»„ä»¶çš„å°è£…åŠŸèƒ½ä»¥åŠç»„ä»¶ç›´æ¥çš„å‰ä¾èµ–å…³ç³»çš„è§£è€¦ä¹Ÿå°±æ˜¯é˜¿é‡Œå¼€æºæ¡†æ¶arouteçš„ä½¿ç”¨ï¼Œä»¥åŠå¦‚ä½•å®ç°ç»„ä»¶å•ç‹¬æµ‹è¯•ç­‰é—®é¢˜ã€‚